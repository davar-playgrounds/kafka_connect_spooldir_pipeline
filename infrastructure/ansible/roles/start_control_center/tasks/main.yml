- name: Creates control center data directory
  file:
    path: /tmp/control-center/data
    state: directory
- name: Start Control Center
  shell: docker run -d --restart=always -p 9021:9021 --name=control-center --ulimit nofile=16384:16384 -v /tmp/control-center/data:/var/lib/confluent-control-center -e CONTROL_CENTER_ZOOKEEPER_CONNECT={{ kafka_zk_host_port_list | join(',') }} -e CONTROL_CENTER_BOOTSTRAP_SERVERS={{ kafka_host_port_list | join(',') }} -e CONTROL_CENTER_REPLICATION_FACTOR=1 -e CONTROL_CENTER_MONITORING_INTERCEPTOR_TOPIC_PARTITIONS=1 -e CONTROL_CENTER_INTERNAL_TOPICS_PARTITIONS=1 -e CONTROL_CENTER_STREAMS_NUM_STREAM_THREADS=2 -e CONTROL_CENTER_CONNECT_CLUSTER={{ kafka_connect_host_port_list | join(',') }} confluentinc/cp-enterprise-control-center